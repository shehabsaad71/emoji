<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMOGO, Emojis library</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    
    <link rel="stylesheet" href="styles.css"> 
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<header id="site-header">
    <a class="logo" href="index.html">EMOGO 😀</a>

    <a class="ascii-link" href="ascii-maker.html">ASCII Maker</a>

    <div class="header-controls">
        <button id="theme-toggle" aria-label="Toggle dark/light theme">
            <span class="icon-moon">🌙</span>
            <span class="icon-sun">☀️</span>
        </button>
        <button id="menu-toggle" class="mobile-only" aria-label="Open menu">
            <span>&#9776;</span>
        </button>
    </div>
</header>

    <main>
        <div class="search-container">
            <input type="text" id="emoji-search" placeholder="🔍 Search for emoji...">
            <button id="clear-search" title="Clear Search">✖️</button>
            <span id="emoji-counter">0 Emojis Displayed</span>
        </div>

        <nav id="category-nav">
        </nav>
    <div id="loader" class="loader">
      <div class="spinner"></div>
      Loading Emojis...
    </div>
        <section id="emoji-grid-container">
        </section>
    </main>
    <footer>
        <div class="footer-links">
            <a href="privacy-policy.html">Privacy Policy</a>
            <a href="terms-of-service.html">Terms of Service</a>
            <a href="contact-us.html">Contact Us</a>
            <a href="about-us.html">About Us</a>
            <a href="blog.html">Blog</a>
        </div>
        <p class="copyright">© 2025 Emogo — All Rights Reserved.</p>
    </footer>

    <script>
// Data (equivalent to data.js)
const EMOJI_COLLECTION = [
    // Objects
    { emoji: '⌚', name: 'Watch', category: 'Objects' },
    { emoji: '📱', name: 'Mobile Phone', category: 'Objects' },
    { emoji: '📲', name: 'Mobile Phone with Arrow', category: 'Objects' },
    { emoji: '💻', name: 'Laptop', category: 'Objects' },
    { emoji: '⌨️', name: 'Keyboard', category: 'Objects' },
    { emoji: '🖥️', name: 'Desktop Computer', category: 'Objects' },
    { emoji: '🖨️', name: 'Printer', category: 'Objects' },
    { emoji: '🖱️', name: 'Computer Mouse', category: 'Objects' },
    { emoji: '🖲️', name: 'Trackball', category: 'Objects' },
    { emoji: '🕹️', name: 'Joystick', category: 'Objects' },
    { emoji: '🗜️', name: 'Clamp', category: 'Objects' },
    { emoji: '💽', name: 'Computer Disk', category: 'Objects' },
    { emoji: '💾', name: 'Floppy Disk', category: 'Objects' },
    { emoji: '💿', name: 'Optical Disk', category: 'Objects' },
    { emoji: '📀', name: 'DVD', category: 'Objects' },
    { emoji: '📼', name: 'Videocassette', category: 'Objects' },
    { emoji: '📷', name: 'Camera', category: 'Objects' },
    { emoji: '📸', name: 'Camera with Flash', category: 'Objects' },
    { emoji: '📹', name: 'Video Camera', category: 'Objects' },
    { emoji: '🎥', name: 'Movie Camera', category: 'Objects' },
    { emoji: '📽️', name: 'Film Projector', category: 'Objects' },
    { emoji: '🎞️', name: 'Film Frames', category: 'Objects' },
    { emoji: '📞', name: 'Telephone Receiver', category: 'Objects' },
    { emoji: '☎️', name: 'Telephone', category: 'Objects' },
    { emoji: '📟', name: 'Pager', category: 'Objects' },
    { emoji: '📠', name: 'Fax Machine', category: 'Objects' },
    { emoji: '📺', name: 'Television', category: 'Objects' },
    { emoji: '📻', name: 'Radio', category: 'Objects' },
    { emoji: '🎙️', name: 'Studio Microphone', category: 'Objects' },
    { emoji: '🎚️', name: 'Level Slider', category: 'Objects' },
    { emoji: '🎛️', name: 'Control Knobs', category: 'Objects' },
    { emoji: '🧭', name: 'Compass', category: 'Objects' },
    { emoji: '⏱️', name: 'Stopwatch', category: 'Objects' },
    { emoji: '⏲️', name: 'Timer Clock', category: 'Objects' },
    { emoji: '⏰', name: 'Alarm Clock', category: 'Objects' },
    { emoji: '🕰️', name: 'Mantelpiece Clock', category: 'Objects' },
    { emoji: '⌛', name: 'Hourglass Done', category: 'Objects' },
    { emoji: '⏳', name: 'Hourglass Not Done', category: 'Objects' },
    { emoji: '📡', name: 'Satellite Antenna', category: 'Objects' },
    { emoji: '🔋', name: 'Battery', category: 'Objects' },
    { emoji: '🪫', name: 'Low Battery', category: 'Objects' },
    { emoji: '🔌', name: 'Electric Plug', category: 'Objects' },
    { emoji: '💡', name: 'Light Bulb', category: 'Objects' },
    { emoji: '🔦', name: 'Flashlight', category: 'Objects' },
    { emoji: '🕯️', name: 'Candle', category: 'Objects' },
    { emoji: '🪔', name: 'Diya Lamp', category: 'Objects' },
    { emoji: '🧯', name: 'Fire Extinguisher', category: 'Objects' },
    { emoji: '🛢️', name: 'Oil Drum', category: 'Objects' },
    { emoji: '💸', name: 'Money with Wings', category: 'Objects' },
    { emoji: '💵', name: 'Dollar Banknote', category: 'Objects' },
    { emoji: '💴', name: 'Yen Banknote', category: 'Objects' },
    { emoji: '💶', name: 'Euro Banknote', category: 'Objects' },
    { emoji: '💷', name: 'Pound Banknote', category: 'Objects' },
    { emoji: '🪙', name: 'Coin', category: 'Objects' },
    { emoji: '💰', name: 'Money Bag', category: 'Objects' },
    { emoji: '💳', name: 'Credit Card', category: 'Objects' },
    { emoji: '🪪', name: 'Identification Card', category: 'Objects' },
    { emoji: '💎', name: 'Gem Stone', category: 'Objects' },
    { emoji: '⚖️', name: 'Balance Scale', category: 'Objects' },
    { emoji: '🪜', name: 'Ladder', category: 'Objects' },
    { emoji: '🧰', name: 'Toolbox', category: 'Objects' },
    { emoji: '🪛', name: 'Screwdriver', category: 'Objects' },
    { emoji: '🔧', name: 'Wrench', category: 'Objects' },
    { emoji: '🔨', name: 'Hammer', category: 'Objects' },
    { emoji: '⚒️', name: 'Hammer and Pick', category: 'Objects' },
    { emoji: '🛠️', name: 'Hammer and Wrench', category: 'Objects' },
    { emoji: '⛏️', name: 'Pick', category: 'Objects' },
    { emoji: '🪚', name: 'Saw', category: 'Objects' },
    { emoji: '🔩', name: 'Bolt and Nut', category: 'Objects' },
    { emoji: '⚙️', name: 'Gear', category: 'Objects' },
    { emoji: '🪤', name: 'Mouse Trap', category: 'Objects' },
    { emoji: '🧱', name: 'Brick', category: 'Objects' },
    { emoji: '⛓️', name: 'Chains', category: 'Objects' },
    { emoji: '⛓️‍💥', name: 'Broken Chain', category: 'Objects' },
    { emoji: '🧲', name: 'Magnet', category: 'Objects' },
    { emoji: '🔫', name: 'Water Pistol', category: 'Objects' },
    { emoji: '💣', name: 'Bomb', category: 'Objects' },
    { emoji: '🧨', name: 'Firecracker', category: 'Objects' },
    { emoji: '🪓', name: 'Axe', category: 'Objects' },
    { emoji: '🔪', name: 'Kitchen Knife', category: 'Objects' },
    { emoji: '🗡️', name: 'Dagger', category: 'Objects' },
    { emoji: '⚔️', name: 'Crossed Swords', category: 'Objects' },
    { emoji: '🛡️', name: 'Shield', category: 'Objects' },
    { emoji: '🚬', name: 'Cigarette', category: 'Objects' },
    { emoji: '⚰️', name: 'Coffin', category: 'Objects' },
    { emoji: '🪦', name: 'Headstone', category: 'Objects' },
    { emoji: '⚱️', name: 'Funeral Urn', category: 'Objects' },
    { emoji: '🏺', name: 'Amphora', category: 'Objects' },
    { emoji: '🔮', name: 'Crystal Ball', category: 'Objects' },
    { emoji: '📿', name: 'Prayer Beads', category: 'Objects' },
    { emoji: '🧿', name: 'Nazar Amulet', category: 'Objects' },
    { emoji: '🪬', name: 'Hamsa', category: 'Objects' },
    { emoji: '💈', name: 'Barber Pole', category: 'Objects' },
    { emoji: '⚗️', name: 'Alembic', category: 'Objects' },
    { emoji: '🔭', name: 'Telescope', category: 'Objects' },
    { emoji: '🔬', name: 'Microscope', category: 'Objects' },
    { emoji: '🕳️', name: 'Hole', category: 'Objects' },
    { emoji: '🩻', name: 'X-Ray', category: 'Objects' },
    { emoji: '🩹', name: 'Adhesive Bandage', category: 'Objects' },
    { emoji: '🩺', name: 'Stethoscope', category: 'Objects' },
    { emoji: '💊', name: 'Pill', category: 'Objects' },
    { emoji: '💉', name: 'Syringe', category: 'Objects' },
    { emoji: '🩸', name: 'Drop of Blood', category: 'Objects' },
    { emoji: '🧬', name: 'DNA', category: 'Objects' },
    { emoji: '🦠', name: 'Microbe', category: 'Objects' },
    { emoji: '🧫', name: 'Petri Dish', category: 'Objects' },
    { emoji: '🧪', name: 'Test Tube', category: 'Objects' },
    { emoji: '🌡️', name: 'Thermometer', category: 'Objects' },
    { emoji: '🧹', name: 'Broom', category: 'Objects' },
    { emoji: '🪠', name: 'Plunger', category: 'Objects' },
    { emoji: '🧺', name: 'Basket', category: 'Objects' },
    { emoji: '🧻', name: 'Roll of Paper', category: 'Objects' },
    { emoji: '🚽', name: 'Toilet', category: 'Objects' },
    { emoji: '🚰', name: 'Potable Water', category: 'Objects' },
    { emoji: '🚿', name: 'Shower', category: 'Objects' },
    { emoji: '🛁', name: 'Bathtub', category: 'Objects' },
    { emoji: '🧼', name: 'Soap', category: 'Objects' },
    { emoji: '🪥', name: 'Toothbrush', category: 'Objects' },
    { emoji: '🪒', name: 'Razor', category: 'Objects' },
    { emoji: '🪮', name: 'Comb', category: 'Objects' },
    { emoji: '🧽', name: 'Sponge', category: 'Objects' },
    { emoji: '🪣', name: 'Bucket', category: 'Objects' },
    { emoji: '🧴', name: 'Lotion Bottle', category: 'Objects' },
    { emoji: '🛎️', name: 'Bellhop Bell', category: 'Objects' },
    { emoji: '🔑', name: 'Key', category: 'Objects' },
    { emoji: '🗝️', name: 'Old Key', category: 'Objects' },
    { emoji: '🚪', name: 'Door', category: 'Objects' },
    { emoji: '🪑', name: 'Chair', category: 'Objects' },
    { emoji: '🛋️', name: 'Couch and Lamp', category: 'Objects' },
    { emoji: '🛏️', name: 'Bed', category: 'Objects' },
    { emoji: '🛌', name: 'Person in Bed', category: 'Objects' },
    { emoji: '🧸', name: 'Teddy Bear', category: 'Objects' },
    { emoji: '🪆', name: 'Nesting Dolls', category: 'Objects' },
    { emoji: '🖼️', name: 'Framed Picture', category: 'Objects' },
    { emoji: '🪞', name: 'Mirror', category: 'Objects' },
    { emoji: '🪟', name: 'Window', category: 'Objects' },
    { emoji: '🛍️', name: 'Shopping Bags', category: 'Objects' },
    { emoji: '🛒', name: 'Shopping Cart', category: 'Objects' },
    { emoji: '🎁', name: 'Wrapped Gift', category: 'Objects' },
    { emoji: '🎈', name: 'Balloon', category: 'Objects' },
    { emoji: '🎏', name: 'Carp Streamer', category: 'Objects' },
    { emoji: '🎀', name: 'Ribbon', category: 'Objects' },
    { emoji: '🪄', name: 'Magic Wand', category: 'Objects' },
    { emoji: '🪅', name: 'Piñata', category: 'Objects' },
    { emoji: '🎊', name: 'Confetti Ball', category: 'Objects' },
    { emoji: '🎉', name: 'Party Popper', category: 'Objects' },
    { emoji: '🎎', name: 'Japanese Dolls', category: 'Objects' },
    { emoji: '🪭', name: 'Folding Hand Fan', category: 'Objects' },
    { emoji: '🏮', name: 'Red Paper Lantern', category: 'Objects' },
    { emoji: '🎐', name: 'Wind Chime', category: 'Objects' },
    { emoji: '🪩', name: 'Mirror Ball', category: 'Objects' },
    { emoji: '🧧', name: 'Red Envelope', category: 'Objects' },
    { emoji: '✉️', name: 'Envelope', category: 'Objects' },
    { emoji: '📧', name: 'E-Mail', category: 'Objects' },
    { emoji: '📨', name: 'Incoming Envelope', category: 'Objects' },
    { emoji: '📩', name: 'Envelope with Arrow', category: 'Objects' },
    { emoji: '📤', name: 'Outbox Tray', category: 'Objects' },
    { emoji: '📥', name: 'Inbox Tray', category: 'Objects' },
    { emoji: '📦', name: 'Package', category: 'Objects' },
    { emoji: '📫', name: 'Closed Mailbox with Raised Flag', category: 'Objects' },
    { emoji: '📪', name: 'Closed Mailbox with Lowered Flag', category: 'Objects' },
    { emoji: '📬', name: 'Open Mailbox with Raised Flag', category: 'Objects' },
    { emoji: '📭', name: 'Open Mailbox with Lowered Flag', category: 'Objects' },
    { emoji: '📮', name: 'Postbox', category: 'Objects' },
    { emoji: '🗳️', name: 'Ballot Box with Ballot', category: 'Objects' },
    { emoji: '✏️', name: 'Pencil', category: 'Objects' },
    { emoji: '🖊️', name: 'Pen', category: 'Objects' },
    { emoji: '🖋️', name: 'Fountain Pen', category: 'Objects' },
    { emoji: '🖌️', name: 'Paintbrush', category: 'Objects' },
    { emoji: '🖍️', name: 'Crayon', category: 'Objects' },
    { emoji: '📝', name: 'Memo', category: 'Objects' },
    { emoji: '📁', name: 'File Folder', category: 'Objects' },
    { emoji: '📂', name: 'Open File Folder', category: 'Objects' },
    { emoji: '🗂️', name: 'Card Index Dividers', category: 'Objects' },
    { emoji: '📅', name: 'Calendar', category: 'Objects' },
    { emoji: '📆', name: 'Tear-Off Calendar', category: 'Objects' },
    { emoji: '📩', name: 'Envelope with Arrow', category: 'Objects' },
    { emoji: '📨', name: 'Incoming Envelope', category: 'Objects' },
    { emoji: '📧', name: 'E-Mail', category: 'Objects' },
    { emoji: '💌', name: 'Love Letter', category: 'Objects' },
    { emoji: '📥', name: 'Inbox Tray', category: 'Objects' },
    { emoji: '📤', name: 'Outbox Tray', category: 'Objects' },
    { emoji: '📦', name: 'Package', category: 'Objects' },
    { emoji: '🏷️', name: 'Label', category: 'Objects' },
    { emoji: '🪧', name: 'Placard', category: 'Objects' },
    { emoji: '📪', name: 'Closed Mailbox with Lowered Flag', category: 'Objects' },
    { emoji: '📫', name: 'Closed Mailbox with Raised Flag', category: 'Objects' },
    { emoji: '📬', name: 'Open Mailbox with Raised Flag', category: 'Objects' },
    { emoji: '📭', name: 'Open Mailbox with Lowered Flag', category: 'Objects' },
    { emoji: '📮', name: 'Postbox', category: 'Objects' },
    { emoji: '📯', name: 'Postal Horn', category: 'Objects' },
    { emoji: '📜', name: 'Scroll', category: 'Objects' },
    { emoji: '📃', name: 'Page with Curl', category: 'Objects' },
    { emoji: '📄', name: 'Page Facing Up', category: 'Objects' },
    { emoji: '📑', name: 'Bookmark Tabs', category: 'Objects' },
    { emoji: '🧾', name: 'Receipt', category: 'Objects' },
    { emoji: '📊', name: 'Bar Chart', category: 'Objects' },
    { emoji: '📈', name: 'Chart Increasing', category: 'Objects' },
    { emoji: '📉', name: 'Chart Decreasing', category: 'Objects' },
    { emoji: '🗒️', name: 'Spiral Note Pad', category: 'Objects' },
    { emoji: '🗓️', name: 'Spiral Calendar', category: 'Objects' },
    { emoji: '📆', name: 'Tear-Off Calendar', category: 'Objects' },
    { emoji: '📅', name: 'Calendar', category: 'Objects' },
    { emoji: '🗑️', name: 'Trash Can', category: 'Objects' },
    { emoji: '📇', name: 'Card Index', category: 'Objects' },
    { emoji: '🗃️', name: 'Card File Box', category: 'Objects' },
    { emoji: '🗳️', name: 'Ballot Box with Ballot', category: 'Objects' },
    { emoji: '🗄️', name: 'File Cabinet', category: 'Objects' },
    { emoji: '📋', name: 'Clipboard', category: 'Objects' },
    { emoji: '📁', name: 'File Folder', category: 'Objects' },
    { emoji: '📂', name: 'Open File Folder', category: 'Objects' },
    { emoji: '🗂️', name: 'Card Index Dividers', category: 'Objects' },
    { emoji: '🗞️', name: 'Rolled-Up Newspaper', category: 'Objects' },
    { emoji: '📰', name: 'Newspaper', category: 'Objects' },
    { emoji: '📓', name: 'Notebook', category: 'Objects' },
    { emoji: '📔', name: 'Notebook with Decorative Cover', category: 'Objects' },
    { emoji: '📒', name: 'Ledger', category: 'Objects' },
    { emoji: '📕', name: 'Closed Book', category: 'Objects' },
    { emoji: '📗', name: 'Green Book', category: 'Objects' },
    { emoji: '📘', name: 'Blue Book', category: 'Objects' },
    { emoji: '📙', name: 'Orange Book', category: 'Objects' },
    { emoji: '📚', name: 'Books', category: 'Objects' },
    { emoji: '📖', name: 'Open Book', category: 'Objects' },
    { emoji: '🔖', name: 'Bookmark', category: 'Objects' },
    { emoji: '🧷', name: 'Safety Pin', category: 'Objects' },
    { emoji: '🔗', name: 'Link', category: 'Objects' },
    { emoji: '📎', name: 'Paperclip', category: 'Objects' },
    { emoji: '🖇️', name: 'Linked Paperclips', category: 'Objects' },
    { emoji: '📐', name: 'Triangular Ruler', category: 'Objects' },
    { emoji: '📏', name: 'Straight Ruler', category: 'Objects' },
    { emoji: '📌', name: 'Pushpin', category: 'Objects' },
    { emoji: '📍', name: 'Round Pushpin', category: 'Objects' },
    { emoji: '✂️', name: 'Scissors', category: 'Objects' },
    { emoji: '🖊️', name: 'Pen', category: 'Objects' },
    { emoji: '🖋️', name: 'Fountain Pen', category: 'Objects' },
    { emoji: '✒️', name: 'Black Nib', category: 'Objects' },
    { emoji: '🖌️', name: 'Paintbrush', category: 'Objects' },
    { emoji: '🖍️', name: 'Crayon', category: 'Objects' },
    { emoji: '📝', name: 'Memo', category: 'Objects' },
    { emoji: '✏️', name: 'Pencil', category: 'Objects' },
    { emoji: '🔍', name: 'Magnifying Glass Tilted Left', category: 'Objects' },
    { emoji: '🔎', name: 'Magnifying Glass Tilted Right', category: 'Objects' },
    { emoji: '🔏', name: 'Locked with Pen', category: 'Objects' },
    { emoji: '🔐', name: 'Locked with Key', category: 'Objects' },
    { emoji: '🔓', name: 'Unlocked', category: 'Objects' },
    { emoji: '🔒', name: 'Locked', category: 'Objects' },
];

const CATEGORY_ICONS = {
    'Favorites': '❤️'
};

let favoriteEmojis = JSON.parse(localStorage.getItem('favorites')) || [];

const ALL_CATEGORIES = Object.keys(CATEGORY_ICONS);


// Main Script (equivalent to script.js)
document.addEventListener('DOMContentLoaded', () => {
    const body = document.body;
    const themeToggle = document.getElementById('theme-toggle');
    const searchInput = document.getElementById('emoji-search');
    const emojiGrid = document.getElementById('emoji-grid-container');
    const categoryNav = document.getElementById('category-nav');
    const menuToggle = document.getElementById('menu-toggle');
    const emojiCounter = document.getElementById('emoji-counter');

    let currentCategory = 'All';

    // --- Theme Toggle Logic ---
    function toggleTheme() {
        if (body.classList.contains('dark-theme')) {
            body.classList.remove('dark-theme');
            localStorage.setItem('theme', 'light');
        } else {
            body.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
        }
    }

    function initializeTheme() {
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
            body.classList.add('dark-theme');
        }
    }

    themeToggle.addEventListener('click', toggleTheme);
    initializeTheme();

    // --- Category Logic ---
    function renderCategories() {
        const allBtn = document.createElement('button');
        allBtn.textContent = 'All Emojis';
        allBtn.className = 'category-btn active';
        allBtn.dataset.category = 'All';
        categoryNav.appendChild(allBtn);

        ALL_CATEGORIES.forEach(category => {
            const btn = document.createElement('button');
            const icon = CATEGORY_ICONS[category] || '';
            btn.textContent = `${icon} ${category}`;
            btn.className = 'category-btn';
            btn.dataset.category = category;
            categoryNav.appendChild(btn);
        });
        
        categoryNav.addEventListener('click', (e) => {
            const btn = e.target.closest('.category-btn');
            if (btn) {
                const category = btn.dataset.category;
                currentCategory = category;
                
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Close menu on mobile
                if (window.innerWidth <= 768) {
                    categoryNav.classList.remove('open');
                    menuToggle.innerHTML = '&#9776;';
                }

                filterAndRenderGrid();
            }
        });
    }

   function createEmojiCard(item) {
    const card = document.createElement('div');
    card.className = 'emoji-card';

    // زر القلب
    const heartBtn = document.createElement('button');
    heartBtn.className = 'heart-btn';
    const isFavorite = favoriteEmojis.some(fav => fav.emoji === item.emoji);
    heartBtn.textContent = isFavorite ? '❤️' : '♡';
    if (isFavorite) heartBtn.classList.add('active');

    heartBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        heartBtn.classList.toggle('active');

        if (heartBtn.classList.contains('active')) {
            heartBtn.textContent = '❤️';
            if (!favoriteEmojis.some(fav => fav.emoji === item.emoji)) {
                favoriteEmojis.push(item);
                localStorage.setItem('favorites', JSON.stringify(favoriteEmojis));
            }
        } else {
            heartBtn.textContent = '♡';
            favoriteEmojis = favoriteEmojis.filter(fav => fav.emoji !== item.emoji);
            localStorage.setItem('favorites', JSON.stringify(favoriteEmojis));
        }

        // تحديث قسم المفضلة لو هو مفتوح حاليًا
        if (currentCategory === 'Favorites') filterAndRenderGrid();
    });

    // باقي الكارد
    const emojiDiv = document.createElement('div');
    emojiDiv.className = 'emoji';
    emojiDiv.textContent = item.emoji;

    const nameDiv = document.createElement('div');
    nameDiv.className = 'emoji-name';
    nameDiv.textContent = item.name;

    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.textContent = '📋 Copy';
    copyBtn.addEventListener('click', async (e) => {
        e.stopPropagation();
        try {
            await navigator.clipboard.writeText(item.emoji);
            copyBtn.textContent = '✅ Copied!';
            setTimeout(() => copyBtn.textContent = '📋 Copy', 800);
        } catch (err) {
            copyBtn.textContent = '❌ Error';
            setTimeout(() => copyBtn.textContent = '📋 Copy', 800);
        }
    });

    card.append(heartBtn, emojiDiv, nameDiv, copyBtn);
    setTimeout(() => card.classList.add('fade-in'), 10);

    return card;
}


    function filterAndRenderGrid() {
    const searchTerm = searchInput.value.toLowerCase();
    emojiGrid.innerHTML = '';

    let filteredEmojis;

    if (currentCategory === 'Favorites') {
        // البحث في المفضلة فقط
        filteredEmojis = favoriteEmojis.filter(item =>
            item.name.toLowerCase().includes(searchTerm) || item.emoji.includes(searchTerm)
        );
    } else if (searchTerm) {
        // لو في قسم All → البحث في كل الإيموجيز
        if (currentCategory === 'All') {
            filteredEmojis = EMOJI_COLLECTION.filter(item =>
                item.name.toLowerCase().includes(searchTerm) || item.emoji.includes(searchTerm)
            );
        } else {
            // البحث بس في القسم الحالي
            filteredEmojis = EMOJI_COLLECTION.filter(item =>
                item.category === currentCategory &&
                (item.name.toLowerCase().includes(searchTerm) || item.emoji.includes(searchTerm))
            );
        }
    } else {
        // بدون بحث
        if (currentCategory === 'All') {
            filteredEmojis = EMOJI_COLLECTION.slice(0, 1714);
        } else {
            filteredEmojis = EMOJI_COLLECTION.filter(item => item.category === currentCategory);
        }
    }

    // إنشاء الكروت
    filteredEmojis.forEach(item => emojiGrid.appendChild(createEmojiCard(item)));

    // عداد الإيموجيز الظاهرة
    emojiCounter.textContent = `${filteredEmojis.length} Emojis Displayed`;

    // زر show more
    const showMoreBtn = document.getElementById("show-more-btn");
    if (currentCategory !== 'Favorites' && !searchTerm) {
        showMoreBtn.style.display = 'block';
        showMoreBtn.onclick = function() {
            const link = String(currentCategory).toLowerCase().replace(/ /g, '-') + '.html';
            window.location.href = link;
        };
    } else {
        showMoreBtn.style.display = 'none';
    }
}


    searchInput.addEventListener('input', filterAndRenderGrid);

    // --- Mobile Menu Toggle ---
    menuToggle.addEventListener('click', () => {
        const isOpen = categoryNav.classList.toggle('open');
        menuToggle.innerHTML = isOpen ? '&times;' : '&#9776;';
    });


    // Initialize
    renderCategories();
    filterAndRenderGrid();
});

// بعد ما تعمل render لكل الإيموجيز
const loader = document.getElementById('loader');

loader.style.transition = 'opacity 0.5s';
loader.style.opacity = '0';

setTimeout(() => {
    loader.style.display = 'none';
}, 500); // 500ms بعد انتهاء الـ fade-out

const showMoreBtn = document.getElementById("show-more-btn");

showMoreBtn.onclick = function() {
  window.location.href = "https://example.com/more-emojis"; // ضع هنا الرابط المطلوب
};

const clearBtn = document.getElementById('clear-search');

// إظهار/إخفاء زر X أثناء الكتابة
searchInput.addEventListener('input', () => {
    if (searchInput.value.length > 0) {
        clearBtn.style.display = 'block';
    } else {
        clearBtn.style.display = 'none';
    }
    filterAndRenderGrid();
});

// مسح النص عند الضغط على X
clearBtn.addEventListener('click', () => {
    searchInput.value = '';
    clearBtn.style.display = 'none';
    filterAndRenderGrid();
});

document.addEventListener("click", function (e) {
  if (e.target.classList.contains("heart-btn")) {
    e.target.classList.toggle("active");
    e.target.textContent = e.target.classList.contains("active") ? "❤️" : "♡";
  }
});

    </script>
</body>
</html>